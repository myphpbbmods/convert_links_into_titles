<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--NOTICE: Please open this file in your web browser. If presented with a security warning, you may safely tell it to allow the blocked content.-->
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD.\nAlthough MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD.\nNo support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.5.xsd">
	<header>
		<meta name="generator" content="MODX file generated with PP MODX Creator by tumba25 (online version)"/>
		<license><![CDATA[http://opensource.org/licenses/gpl-license.php GNU General Public License v2]]></license>
		<title lang="en"><![CDATA[Convert internal URL links into their titles (AddOn external links))]]></title>
		<title lang="de"><![CDATA[Interne Links in Titel konvertieren (AddOn externe Links)]]></title>
		<description lang="en"><![CDATA[With this mod you are able to automatically convert external links into the given titles.

When there is a title and it is NOT empty it uses this as replacement text for the full http url in your post.
If it cannot read the file or the <title> tag is empty it returns the "regular" output the original code did before.
Titles will be read once when you submit a post. The script does not check wether the URL still exists or not when it displays the message.]]></description>
		<description lang="de"><![CDATA[Mit dieser Modifikation kannst Du externe Links in Beiträgen automatisch in deren Titel konvertiert werden.

Wenn die externe Seite einen Titel hat und dieser nicht leer ist, dann benutzt das Script diesen als Text-Ersetzung für die HTTP Url der dortigen Seite.
Wenn kein Titel vorhanden ist, wird die reguläre Ersetzung durch das phpBB3 benutzt.
Die Titel werden nur beim Posten ausgelesen. Das Script überprüft nicht noch einmal, ob die URL noch erreichbar und der Titel noch so vorhanden ist, wenn der Beitrag angezeigt wird.]]></description>
		<author-notes lang="en"><![CDATA[allow_url_open() has to be enabled when wanting to convert external URLs into their titles.
This addon can work as a stand alone mod.]]></author-notes>
		<author-notes lang="de"><![CDATA[allow_url_open() muß aktiviert sein, um externe Seitentitel auslesen zu können.
Dieses AddOn kann auch allein verwendet werden.]]></author-notes>
		<author-group>
			<author>
				<realname><![CDATA[Miriam]]></realname>
				<username><![CDATA[Miriam]]></username>
				<homepage><![CDATA[http://mymods.bplaced.net/]]></homepage>
				<email><![CDATA[myphpbbmods@gmail.com]]></email>
			</author>
		</author-group>
		<mod-version>1.0</mod-version>
		<installation>
			<level>easy</level>
			<time>120</time>
			<target-version>3.0.11</target-version>
		</installation>
		<link-group>
			<link type="parent" href="./install_mod.xml" lang="en">Main Mod: Convert internal URL links into their titles</link>
			<link type="parent" href="./install_mod.xml" lang="en">Haupt-Mod:Interne Links in Titel konvertieren</link>
		</link-group>
	</header>
	<action-group>
		<open src="includes/functions_content.php">
			<edit>
				<find><![CDATA[		case MAGIC_URL_FULL:
			$tag	= 'm';
			$text	= $short_url;]]></find>
				<action type="after-add"><![CDATA[			$handle = @fopen($url, "r");
			if ($handle)
			{
				while (($line = fgets($handle, 4096)) !== false) 
				{
					if (feof($handle)) break;
					$match = preg_match('$(\<title\>)(.*)(\<\/title\>)$i', $line, $matches);
					if ($match and trim($matches[2] !== ''))
					{
						$text = strip_tags($matches[2]);
						break;
					}
				}
				fclose($handle);
			}]]></action>
			</edit>
		</open>
		<diy-instructions lang="en"><![CDATA[Purge cache.]]></diy-instructions>
		<diy-instructions lang="de"><![CDATA[Leere den Cache.]]></diy-instructions>
	</action-group>
</mod>
